import{s as Te,n as J,r as Je,b as ye,f as we,h as Ke,e as ge,o as Qe,i as We}from"../chunks/scheduler.8xorJwSQ.js";import{S as Ee,i as Pe,e as De,a as N,f as _,g as h,m as I,s as B,h as b,j as g,n as C,c as V,x as ne,k as m,z as f,y as F,o as S,A as ke,r as Se,u as qe,v as Ge,d as q,t as K,w as He,b as ze,p as Fe,B as Xe}from"../chunks/index.cMEIfIjL.js";import{e as Me}from"../chunks/each.-oqiv04n.js";import{c as P,G as Ye,a as Ne}from"../chunks/game.tkEOXXlm.js";import{p as Re,g as je}from"../chunks/store.GPvSgBr-.js";import{p as Ze}from"../chunks/stores.p0pG8uEK.js";import{k as $e}from"../chunks/kimble.NAErm6TE.js";function Oe(s){let t,e,a,l,i,o=s[0].name+"",u,n,r,y='<i class="bi-x-lg"><span class="sr-only">Close modal</span></i>',d,c,p,v,G,w=s[0].penalty+"",k,R,H,z,L,oe,re,ie,Q=s[0].raises+"",Y,ue,A,D,W,ce,Z,fe,M,X,de,$,me,j,pe,ee,_e,O,Ie="Reset points",te,he,Ce;return{c(){t=h("div"),e=h("div"),a=h("div"),l=h("div"),i=h("h3"),u=I(o),n=B(),r=h("button"),r.innerHTML=y,c=B(),p=h("div"),v=h("p"),G=I("Total penalty: "),k=I(w),R=B(),H=h("br"),z=I(`
                    Penalty left: `),L=I(s[2]),oe=B(),re=h("br"),ie=I(`
                    Raises: `),Y=I(Q),ue=B(),A=h("div"),D=h("button"),W=h("i"),ce=I(`
                    Remove penalty`),fe=B(),M=h("button"),X=h("i"),de=I(`
                    Add penalty`),me=B(),j=h("button"),pe=I("ðŸ‘‘ Raise"),_e=B(),O=h("button"),O.textContent=Ie,this.h()},l(T){t=b(T,"DIV",{tabindex:!0,"aria-hidden":!0,class:!0});var E=g(t);e=b(E,"DIV",{class:!0});var Be=g(e);a=b(Be,"DIV",{class:!0});var le=g(a);l=b(le,"DIV",{class:!0});var se=g(l);i=b(se,"H3",{class:!0});var Ve=g(i);u=C(Ve,o),Ve.forEach(_),n=V(se),r=b(se,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-19ft4hj"&&(r.innerHTML=y),se.forEach(_),c=V(le),p=b(le,"DIV",{class:!0});var U=g(p);v=b(U,"P",{class:!0});var x=g(v);G=C(x,"Total penalty: "),k=C(x,w),R=V(x),H=b(x,"BR",{}),z=C(x,`
                    Penalty left: `),L=C(x,s[2]),oe=V(x),re=b(x,"BR",{}),ie=C(x,`
                    Raises: `),Y=C(x,Q),x.forEach(_),ue=V(U),A=b(U,"DIV",{});var ae=g(A);D=b(ae,"BUTTON",{class:!0});var be=g(D);W=b(be,"I",{class:!0}),g(W).forEach(_),ce=C(be,`
                    Remove penalty`),be.forEach(_),fe=V(ae),M=b(ae,"BUTTON",{class:!0});var ve=g(M);X=b(ve,"I",{class:!0}),g(X).forEach(_),de=C(ve,`
                    Add penalty`),ve.forEach(_),ae.forEach(_),me=V(U),j=b(U,"BUTTON",{class:!0});var xe=g(j);pe=C(xe,"ðŸ‘‘ Raise"),xe.forEach(_),_e=V(U),O=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(O)!=="svelte-2vfkv8"&&(O.textContent=Ie),U.forEach(_),le.forEach(_),Be.forEach(_),E.forEach(_),this.h()},h(){m(i,"class","text-xl font-semibold truncate"),m(r,"type","button"),m(r,"class","rounded-lg text-sm ml-6 w-8 h-8 ms-auto inline-flex justify-center items-center"),m(l,"class",d="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[s[0].color].bgPrimary),m(v,"class","text-base leading-relaxed"),m(W,"class","bi-dash-lg"),m(D,"class",Z="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary),m(X,"class","bi-plus-lg"),m(M,"class",$="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary),m(j,"class",ee="drop-shadow-md p-4 rounded-xl w-4/5 "+P[s[0].color].bgPrimary),m(O,"class","p-2 rounded-xl w-4/5 text-red-700"),m(p,"class",te="p-4 md:p-5 space-y-4 rounded-b-xl "+P[s[0].color].bgSecondary),m(a,"class","relative rounded-lg shadow"),m(e,"class","relative p-4 w-full max-w-2xl max-h-full"),m(t,"tabindex","-1"),m(t,"aria-hidden","true"),m(t,"class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full")},m(T,E){N(T,t,E),f(t,e),f(e,a),f(a,l),f(l,i),f(i,u),f(l,n),f(l,r),f(a,c),f(a,p),f(p,v),f(v,G),f(v,k),f(v,R),f(v,H),f(v,z),f(v,L),f(v,oe),f(v,re),f(v,ie),f(v,Y),f(p,ue),f(p,A),f(A,D),f(D,W),f(D,ce),f(A,fe),f(A,M),f(M,X),f(M,de),f(p,me),f(p,j),f(j,pe),f(p,_e),f(p,O),he||(Ce=[F(r,"click",s[3]),F(D,"click",s[5]),F(M,"click",s[4]),F(j,"click",s[6]),F(O,"click",s[7])],he=!0)},p(T,E){E&1&&o!==(o=T[0].name+"")&&S(u,o),E&1&&d!==(d="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[T[0].color].bgPrimary)&&m(l,"class",d),E&1&&w!==(w=T[0].penalty+"")&&S(k,w),E&4&&S(L,T[2]),E&1&&Q!==(Q=T[0].raises+"")&&S(Y,Q),E&1&&Z!==(Z="drop-shadow-md p-4 rounded-xl w-2/5 "+P[T[0].color].bgPrimary)&&m(D,"class",Z),E&1&&$!==($="drop-shadow-md p-4 rounded-xl w-2/5 "+P[T[0].color].bgPrimary)&&m(M,"class",$),E&1&&ee!==(ee="drop-shadow-md p-4 rounded-xl w-4/5 "+P[T[0].color].bgPrimary)&&m(j,"class",ee),E&1&&te!==(te="p-4 md:p-5 space-y-4 rounded-b-xl "+P[T[0].color].bgSecondary)&&m(p,"class",te)},d(T){T&&_(t),he=!1,Je(Ce)}}}function et(s){let t,e=s[1]&&Oe(s);return{c(){e&&e.c(),t=De()},l(a){e&&e.l(a),t=De()},m(a,l){e&&e.m(a,l),N(a,t,l)},p(a,[l]){a[1]?e?e.p(a,l):(e=Oe(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:J,o:J,d(a){a&&_(t),e&&e.d(a)}}}function tt(s,t,e){let a,{team:l}=t,{visible:i=!1}=t;const o=()=>e(1,i=!1),u=()=>e(0,l.penalty+=1,l),n=()=>e(0,l.points+=1,l),r=()=>e(0,l.raises+=1,l),y=()=>{confirm("Are you sure?")&&(e(0,l.penalty=0,l),e(0,l.points=0,l),e(0,l.raises=0,l))};return s.$$set=d=>{"team"in d&&e(0,l=d.team),"visible"in d&&e(1,i=d.visible)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,u,n,r,y]}class lt extends Ee{constructor(t){super(),Pe(this,t,tt,et,Te,{team:0,visible:1})}}function st(s){let t,e="Not in game";return{c(){t=h("button"),t.textContent=e,this.h()},l(a){t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1nlrkt6"&&(t.textContent=e),this.h()},h(){m(t,"class","p-3 w-full h-20 rounded-xl flex justify-between bg-grey-300 ")},m(a,l){N(a,t,l)},p:J,d(a){a&&_(t)}}}function at(s){let t,e,a,l=s[0].name+"",i,o,u,n="ðŸ‘‘".repeat(Math.min(s[0].raises,Ue))+"",r,y,d,c,p,v,G;return{c(){t=h("button"),e=h("div"),a=h("p"),i=I(l),o=B(),u=h("p"),r=I(n),y=B(),d=h("div"),c=I(s[2]),this.h()},l(w){t=b(w,"BUTTON",{class:!0});var k=g(t);e=b(k,"DIV",{class:!0});var R=g(e);a=b(R,"P",{class:!0});var H=g(a);i=C(H,l),H.forEach(_),o=V(R),u=b(R,"P",{});var z=g(u);r=C(z,n),z.forEach(_),R.forEach(_),y=V(k),d=b(k,"DIV",{class:!0});var L=g(d);c=C(L,s[2]),L.forEach(_),k.forEach(_),this.h()},h(){m(a,"class","truncate"),m(e,"class","flex flex-col text-start truncate"),m(d,"class","self-center text-2xl ml-4"),m(t,"class",p=""+P[s[0].color].class+" hover:"+P[s[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")},m(w,k){N(w,t,k),f(t,e),f(e,a),f(a,i),f(e,o),f(e,u),f(u,r),f(t,y),f(t,d),f(d,c),v||(G=F(t,"click",s[3]),v=!0)},p(w,k){k&1&&l!==(l=w[0].name+"")&&S(i,l),k&1&&n!==(n="ðŸ‘‘".repeat(Math.min(w[0].raises,Ue))+"")&&S(r,n),k&4&&S(c,w[2]),k&1&&p!==(p=""+P[w[0].color].class+" hover:"+P[w[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")&&m(t,"class",p)},d(w){w&&_(t),v=!1,G()}}}function nt(s){let t,e,a,l,i;function o(c,p){return c[0]?at:st}let u=o(s),n=u(s);function r(c){s[4](c)}function y(c){s[5](c)}let d={};return s[0]!==void 0&&(d.team=s[0]),s[1]!==void 0&&(d.visible=s[1]),e=new lt({props:d}),ye.push(()=>ke(e,"team",r)),ye.push(()=>ke(e,"visible",y)),{c(){n.c(),t=B(),Se(e.$$.fragment)},l(c){n.l(c),t=V(c),qe(e.$$.fragment,c)},m(c,p){n.m(c,p),N(c,t,p),Ge(e,c,p),i=!0},p(c,[p]){u===(u=o(c))&&n?n.p(c,p):(n.d(1),n=u(c),n&&(n.c(),n.m(t.parentNode,t)));const v={};!a&&p&1&&(a=!0,v.team=c[0],we(()=>a=!1)),!l&&p&2&&(l=!0,v.visible=c[1],we(()=>l=!1)),e.$set(v)},i(c){i||(q(e.$$.fragment,c),i=!0)},o(c){K(e.$$.fragment,c),i=!1},d(c){c&&_(t),n.d(c),He(e,c)}}}const Ue=5;function ot(s,t,e){let a,{team:l}=t,i=!1;const o=()=>e(1,i=!0);function u(r){l=r,e(0,l)}function n(r){i=r,e(1,i)}return s.$$set=r=>{"team"in r&&e(0,l=r.team)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,u,n]}class rt extends Ee{constructor(t){super(),Pe(this,t,ot,nt,Te,{team:0})}}function Le(s,t,e){const a=s.slice();return a[6]=t[e],a[7]=t,a[8]=e,a}function it(s){let t,e="Loading game...";return{c(){t=h("p"),t.textContent=e},l(a){t=b(a,"P",{"data-svelte-h":!0}),ne(t)!=="svelte-1ttrtic"&&(t.textContent=e)},m(a,l){N(a,t,l)},p:J,i:J,o:J,d(a){a&&_(t)}}}function ut(s){let t,e,a=Me(Ne),l=[];for(let o=0;o<a.length;o+=1)l[o]=Ae(Le(s,a,o));const i=o=>K(l[o],1,1,()=>{l[o]=null});return{c(){t=h("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=b(o,"DIV",{class:!0});var u=g(t);for(let n=0;n<l.length;n+=1)l[n].l(u);u.forEach(_),this.h()},h(){m(t,"class","flex -mx-1 -px-1 flex-wrap w-11/12 lg:w-1/3")},m(o,u){N(o,t,u);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);e=!0},p(o,u){if(u&3){a=Me(Ne);let n;for(n=0;n<a.length;n+=1){const r=Le(o,a,n);l[n]?(l[n].p(r,u),q(l[n],1)):(l[n]=Ae(r),l[n].c(),q(l[n],1),l[n].m(t,null))}for(Fe(),n=a.length;n<l.length;n+=1)i(n);ze()}},i(o){if(!e){for(let u=0;u<a.length;u+=1)q(l[u]);e=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)K(l[u]);e=!1},d(o){o&&_(t),Xe(l,o)}}}function Ae(s){let t,e,a,l,i;function o(n){s[3](n,s[6])}let u={};return s[1][s[0]].teams[s[6]]!==void 0&&(u.team=s[1][s[0]].teams[s[6]]),e=new rt({props:u}),ye.push(()=>ke(e,"team",o)),{c(){t=h("div"),Se(e.$$.fragment),l=B(),this.h()},l(n){t=b(n,"DIV",{class:!0});var r=g(t);qe(e.$$.fragment,r),l=V(r),r.forEach(_),this.h()},h(){m(t,"class","w-1/2 px-1 py-1")},m(n,r){N(n,t,r),Ge(e,t,null),f(t,l),i=!0},p(n,r){s=n;const y={};!a&&r&3&&(a=!0,y.team=s[1][s[0]].teams[s[6]],we(()=>a=!1)),e.$set(y)},i(n){i||(q(e.$$.fragment,n),i=!0)},o(n){K(e.$$.fragment,n),i=!1},d(n){n&&_(t),He(e)}}}function ct(s){let t,e,a,l,i,o,u;const n=[ut,it],r=[];function y(d,c){return d[1][d[0]]?0:1}return i=y(s),o=r[i]=n[i](s),{c(){t=h("div"),e=h("img"),l=B(),o.c(),this.h()},l(d){t=b(d,"DIV",{class:!0});var c=g(t);e=b(c,"IMG",{src:!0,alt:!0,class:!0}),l=V(c),o.l(c),c.forEach(_),this.h()},h(){Ke(e.src,a=$e)||m(e,"src",a),m(e,"alt","kimble logo"),m(e,"class","w-60 my-10 drop-shadow-xl"),m(t,"class","flex flex-col gap-5 w-full items-center")},m(d,c){N(d,t,c),f(t,e),f(t,l),r[i].m(t,null),u=!0},p(d,[c]){let p=i;i=y(d),i===p?r[i].p(d,c):(Fe(),K(r[p],1,1,()=>{r[p]=null}),ze(),o=r[i],o?o.p(d,c):(o=r[i]=n[i](d),o.c()),q(o,1),o.m(t,null))},i(d){u||(q(o),u=!0)},o(d){K(o),u=!1},d(d){d&&_(t),r[i].d()}}}function ft(s,t,e){let a,l,i;ge(s,Re,r=>e(4,a=r)),ge(s,je,r=>e(1,l=r)),ge(s,Ze,r=>e(5,i=r));let o;Qe(()=>{e(0,o=i.url.searchParams.get("id")||"")});let u=new Ye;function n(r,y){s.$$.not_equal(l[o].teams[y],r)&&(l[o].teams[y]=r,je.set(l))}return s.$$.update=()=>{s.$$.dirty&3&&e(2,u=l[o]),s.$$.dirty&4&&We(Re,a=u?.name,a)},[o,l,u,n]}class gt extends Ee{constructor(t){super(),Pe(this,t,ft,ct,Te,{})}}export{gt as component};
