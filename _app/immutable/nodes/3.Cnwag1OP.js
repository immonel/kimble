import{s as ke,n as Y,r as Fe,b as ge,f as ye,h as Je,e as ve,o as Ke,i as Qe}from"../chunks/scheduler.8xorJwSQ.js";import{S as Te,i as Ee,e as Be,a as O,f as p,g as _,s as B,m as C,h as b,j as g,c as D,x as ie,n as V,k as m,z as d,A as De,y as K,o as Q,B as we,r as Se,u as Ae,v as qe,d as W,t as Z,w as Ge,b as ze,p as He,C as We}from"../chunks/index.L_Ej_rLE.js";import{e as Ne}from"../chunks/each.-oqiv04n.js";import{c as I,G as Xe,a as Me}from"../chunks/game.11GcYjVd.js";import{p as Re,g as je}from"../chunks/store.GPvSgBr-.js";import{d as Ye}from"../chunks/singletons.95SX6EAO.js";import{k as Ze}from"../chunks/kimble.NAErm6TE.js";function Ue(s){let e,t,a,l,u,r,i,n='<i class="bi-x-lg"><span class="sr-only">Close modal</span></i>',c,v,f,o,h,E=s[0].penalty+"",x,j,L,S,A,X,w,k,q=s[0].raises+"",J,G,M,P,R,ue,ee,te,ce,U,$,de,le,fe,z,me,se,pe,H,Pe="Reset points",ae,_e,Ie;return{c(){e=_("div"),t=_("div"),a=_("div"),l=_("div"),u=_("input"),r=B(),i=_("button"),i.innerHTML=n,v=B(),f=_("div"),o=_("p"),h=C("Total penalty: "),x=C(E),j=B(),L=_("br"),S=C(`
                    Penalty left: `),A=C(s[2]),X=B(),w=_("br"),k=C(`
                    Raises: `),J=C(q),G=B(),M=_("div"),P=_("button"),R=_("i"),ue=C(`
                    Remove penalty`),ce=B(),U=_("button"),$=_("i"),de=C(`
                    Add penalty`),fe=B(),z=_("button"),me=C("ðŸ‘‘ Raise"),pe=B(),H=_("button"),H.textContent=Pe,this.h()},l(y){e=b(y,"DIV",{tabindex:!0,"aria-hidden":!0,class:!0});var T=g(e);t=b(T,"DIV",{class:!0});var Ce=g(t);a=b(Ce,"DIV",{class:!0});var ne=g(a);l=b(ne,"DIV",{class:!0});var oe=g(l);u=b(oe,"INPUT",{placeholder:!0,class:!0}),r=D(oe),i=b(oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ie(i)!=="svelte-19ft4hj"&&(i.innerHTML=n),oe.forEach(p),v=D(ne),f=b(ne,"DIV",{class:!0});var F=g(f);o=b(F,"P",{class:!0});var N=g(o);h=V(N,"Total penalty: "),x=V(N,E),j=D(N),L=b(N,"BR",{}),S=V(N,`
                    Penalty left: `),A=V(N,s[2]),X=D(N),w=b(N,"BR",{}),k=V(N,`
                    Raises: `),J=V(N,q),N.forEach(p),G=D(F),M=b(F,"DIV",{});var re=g(M);P=b(re,"BUTTON",{class:!0});var be=g(P);R=b(be,"I",{class:!0}),g(R).forEach(p),ue=V(be,`
                    Remove penalty`),be.forEach(p),ce=D(re),U=b(re,"BUTTON",{class:!0});var he=g(U);$=b(he,"I",{class:!0}),g($).forEach(p),de=V(he,`
                    Add penalty`),he.forEach(p),re.forEach(p),fe=D(F),z=b(F,"BUTTON",{class:!0});var Ve=g(z);me=V(Ve,"ðŸ‘‘ Raise"),Ve.forEach(p),pe=D(F),H=b(F,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(H)!=="svelte-2vfkv8"&&(H.textContent=Pe),F.forEach(p),ne.forEach(p),Ce.forEach(p),T.forEach(p),this.h()},h(){m(u,"placeholder","Team name"),m(u,"class","bg-transparent text-xl font-semibold truncate"),m(i,"type","button"),m(i,"class","rounded-lg text-sm ml-6 w-8 h-8 ms-auto inline-flex justify-center items-center"),m(l,"class",c="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+I[s[0].color].bgPrimary),m(o,"class","text-base leading-relaxed"),m(R,"class","bi-dash-lg"),P.disabled=ee=!(s[2]>0),m(P,"class",te="drop-shadow-md p-4 rounded-xl w-2/5 "+I[s[0].color].bgPrimary+" disabled:opacity-50"),m($,"class","bi-plus-lg"),m(U,"class",le="drop-shadow-md p-4 rounded-xl w-2/5 "+I[s[0].color].bgPrimary),m(z,"class",se="drop-shadow-md p-4 rounded-xl w-4/5 "+I[s[0].color].bgPrimary),m(H,"class","p-2 rounded-xl w-4/5 text-red-700"),m(f,"class",ae="p-4 md:p-5 space-y-4 rounded-b-xl "+I[s[0].color].bgSecondary),m(a,"class","relative rounded-lg shadow"),m(t,"class","relative p-4 w-full max-w-2xl max-h-full"),m(e,"tabindex","-1"),m(e,"aria-hidden","true"),m(e,"class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full")},m(y,T){O(y,e,T),d(e,t),d(t,a),d(a,l),d(l,u),De(u,s[0].name),d(l,r),d(l,i),d(a,v),d(a,f),d(f,o),d(o,h),d(o,x),d(o,j),d(o,L),d(o,S),d(o,A),d(o,X),d(o,w),d(o,k),d(o,J),d(f,G),d(f,M),d(M,P),d(P,R),d(P,ue),d(M,ce),d(M,U),d(U,$),d(U,de),d(f,fe),d(f,z),d(z,me),d(f,pe),d(f,H),_e||(Ie=[K(u,"input",s[8]),K(i,"click",s[3]),K(P,"click",s[5]),K(U,"click",s[4]),K(z,"click",s[6]),K(H,"click",s[7])],_e=!0)},p(y,T){T&1&&u.value!==y[0].name&&De(u,y[0].name),T&1&&c!==(c="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+I[y[0].color].bgPrimary)&&m(l,"class",c),T&1&&E!==(E=y[0].penalty+"")&&Q(x,E),T&4&&Q(A,y[2]),T&1&&q!==(q=y[0].raises+"")&&Q(J,q),T&4&&ee!==(ee=!(y[2]>0))&&(P.disabled=ee),T&1&&te!==(te="drop-shadow-md p-4 rounded-xl w-2/5 "+I[y[0].color].bgPrimary+" disabled:opacity-50")&&m(P,"class",te),T&1&&le!==(le="drop-shadow-md p-4 rounded-xl w-2/5 "+I[y[0].color].bgPrimary)&&m(U,"class",le),T&1&&se!==(se="drop-shadow-md p-4 rounded-xl w-4/5 "+I[y[0].color].bgPrimary)&&m(z,"class",se),T&1&&ae!==(ae="p-4 md:p-5 space-y-4 rounded-b-xl "+I[y[0].color].bgSecondary)&&m(f,"class",ae)},d(y){y&&p(e),_e=!1,Fe(Ie)}}}function $e(s){let e,t=s[1]&&Ue(s);return{c(){t&&t.c(),e=Be()},l(a){t&&t.l(a),e=Be()},m(a,l){t&&t.m(a,l),O(a,e,l)},p(a,[l]){a[1]?t?t.p(a,l):(t=Ue(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Y,o:Y,d(a){a&&p(e),t&&t.d(a)}}}function et(s,e,t){let a,{team:l}=e,{visible:u=!1}=e;const r=()=>t(1,u=!1),i=()=>t(0,l.penalty+=1,l),n=()=>t(0,l.points+=1,l),c=()=>t(0,l.raises+=1,l),v=()=>{confirm("Are you sure?")&&(t(0,l.penalty=0,l),t(0,l.points=0,l),t(0,l.raises=0,l))};function f(){l.name=this.value,t(0,l)}return s.$$set=o=>{"team"in o&&t(0,l=o.team),"visible"in o&&t(1,u=o.visible)},s.$$.update=()=>{s.$$.dirty&1&&t(2,a=l.penalty-l.points)},[l,u,a,r,i,n,c,v,f]}class tt extends Te{constructor(e){super(),Ee(this,e,et,$e,ke,{team:0,visible:1})}}function lt(s){let e,t="Not in game";return{c(){e=_("button"),e.textContent=t,this.h()},l(a){e=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1nlrkt6"&&(e.textContent=t),this.h()},h(){m(e,"class","p-3 w-full h-20 rounded-xl flex justify-between bg-grey-300 ")},m(a,l){O(a,e,l)},p:Y,d(a){a&&p(e)}}}function st(s){let e,t,a,l=s[0].name+"",u,r,i,n,c,v="ðŸ‘‘".repeat(Math.min(s[0].raises,Oe))+"",f,o,h,E,x,j=s[0].penalty+"",L,S,A,X;return{c(){e=_("button"),t=_("div"),a=_("p"),u=C(l),r=B(),i=_("div"),n=_("div"),c=_("p"),f=C(v),o=B(),h=_("p"),E=C(s[2]),x=C(" / "),L=C(j),this.h()},l(w){e=b(w,"BUTTON",{class:!0});var k=g(e);t=b(k,"DIV",{class:!0});var q=g(t);a=b(q,"P",{class:!0});var J=g(a);u=V(J,l),J.forEach(p),q.forEach(p),r=D(k),i=b(k,"DIV",{class:!0});var G=g(i);n=b(G,"DIV",{class:!0});var M=g(n);c=b(M,"P",{class:!0});var P=g(c);f=V(P,v),P.forEach(p),M.forEach(p),o=D(G),h=b(G,"P",{class:!0});var R=g(h);E=V(R,s[2]),x=V(R," / "),L=V(R,j),R.forEach(p),G.forEach(p),k.forEach(p),this.h()},h(){m(a,"class","truncate"),m(t,"class","text-start"),m(c,"class","text-sm"),m(n,"class","flex items-center text-start"),m(h,"class","text-2xl min-w-fit"),m(i,"class","flex justify-between"),m(e,"class",S=""+I[s[0].color].class+" hover:"+I[s[0].color].hoverClass+" p-3 w-full h-20 rounded-xl")},m(w,k){O(w,e,k),d(e,t),d(t,a),d(a,u),d(e,r),d(e,i),d(i,n),d(n,c),d(c,f),d(i,o),d(i,h),d(h,E),d(h,x),d(h,L),A||(X=K(e,"click",s[3]),A=!0)},p(w,k){k&1&&l!==(l=w[0].name+"")&&Q(u,l),k&1&&v!==(v="ðŸ‘‘".repeat(Math.min(w[0].raises,Oe))+"")&&Q(f,v),k&4&&Q(E,w[2]),k&1&&j!==(j=w[0].penalty+"")&&Q(L,j),k&1&&S!==(S=""+I[w[0].color].class+" hover:"+I[w[0].color].hoverClass+" p-3 w-full h-20 rounded-xl")&&m(e,"class",S)},d(w){w&&p(e),A=!1,X()}}}function at(s){let e,t,a,l,u;function r(o,h){return o[0]?st:lt}let i=r(s),n=i(s);function c(o){s[4](o)}function v(o){s[5](o)}let f={};return s[0]!==void 0&&(f.team=s[0]),s[1]!==void 0&&(f.visible=s[1]),t=new tt({props:f}),ge.push(()=>we(t,"team",c)),ge.push(()=>we(t,"visible",v)),{c(){n.c(),e=B(),Se(t.$$.fragment)},l(o){n.l(o),e=D(o),Ae(t.$$.fragment,o)},m(o,h){n.m(o,h),O(o,e,h),qe(t,o,h),u=!0},p(o,[h]){i===(i=r(o))&&n?n.p(o,h):(n.d(1),n=i(o),n&&(n.c(),n.m(e.parentNode,e)));const E={};!a&&h&1&&(a=!0,E.team=o[0],ye(()=>a=!1)),!l&&h&2&&(l=!0,E.visible=o[1],ye(()=>l=!1)),t.$set(E)},i(o){u||(W(t.$$.fragment,o),u=!0)},o(o){Z(t.$$.fragment,o),u=!1},d(o){o&&p(e),n.d(o),Ge(t,o)}}}const Oe=6;function nt(s,e,t){let a,{team:l}=e,u=!1;const r=()=>t(1,u=!0);function i(c){l=c,t(0,l)}function n(c){u=c,t(1,u)}return s.$$set=c=>{"team"in c&&t(0,l=c.team)},s.$$.update=()=>{s.$$.dirty&1&&t(2,a=l.penalty-l.points)},[l,u,a,r,i,n]}class ot extends Te{constructor(e){super(),Ee(this,e,nt,at,ke,{team:0})}}const rt=()=>{const s=Ye;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},it={subscribe(s){return rt().page.subscribe(s)}};function xe(s,e,t){const a=s.slice();return a[6]=e[t],a[7]=e,a[8]=t,a}function ut(s){let e,t="Loading game...";return{c(){e=_("p"),e.textContent=t},l(a){e=b(a,"P",{"data-svelte-h":!0}),ie(e)!=="svelte-1ttrtic"&&(e.textContent=t)},m(a,l){O(a,e,l)},p:Y,i:Y,o:Y,d(a){a&&p(e)}}}function ct(s){let e,t,a=Ne(Me),l=[];for(let r=0;r<a.length;r+=1)l[r]=Le(xe(s,a,r));const u=r=>Z(l[r],1,1,()=>{l[r]=null});return{c(){e=_("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var i=g(e);for(let n=0;n<l.length;n+=1)l[n].l(i);i.forEach(p),this.h()},h(){m(e,"class","flex -mx-1 -px-1 flex-wrap w-11/12 lg:w-1/3")},m(r,i){O(r,e,i);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null);t=!0},p(r,i){if(i&3){a=Ne(Me);let n;for(n=0;n<a.length;n+=1){const c=xe(r,a,n);l[n]?(l[n].p(c,i),W(l[n],1)):(l[n]=Le(c),l[n].c(),W(l[n],1),l[n].m(e,null))}for(He(),n=a.length;n<l.length;n+=1)u(n);ze()}},i(r){if(!t){for(let i=0;i<a.length;i+=1)W(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)Z(l[i]);t=!1},d(r){r&&p(e),We(l,r)}}}function Le(s){let e,t,a,l,u;function r(n){s[3](n,s[6])}let i={};return s[1][s[0]].teams[s[6]]!==void 0&&(i.team=s[1][s[0]].teams[s[6]]),t=new ot({props:i}),ge.push(()=>we(t,"team",r)),{c(){e=_("div"),Se(t.$$.fragment),l=B(),this.h()},l(n){e=b(n,"DIV",{class:!0});var c=g(e);Ae(t.$$.fragment,c),l=D(c),c.forEach(p),this.h()},h(){m(e,"class","w-1/2 px-1 py-1")},m(n,c){O(n,e,c),qe(t,e,null),d(e,l),u=!0},p(n,c){s=n;const v={};!a&&c&3&&(a=!0,v.team=s[1][s[0]].teams[s[6]],ye(()=>a=!1)),t.$set(v)},i(n){u||(W(t.$$.fragment,n),u=!0)},o(n){Z(t.$$.fragment,n),u=!1},d(n){n&&p(e),Ge(t)}}}function dt(s){let e,t,a,l,u,r,i;const n=[ct,ut],c=[];function v(f,o){return f[1][f[0]]?0:1}return u=v(s),r=c[u]=n[u](s),{c(){e=_("div"),t=_("img"),l=B(),r.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=g(e);t=b(o,"IMG",{src:!0,alt:!0,class:!0}),l=D(o),r.l(o),o.forEach(p),this.h()},h(){Je(t.src,a=Ze)||m(t,"src",a),m(t,"alt","kimble logo"),m(t,"class","w-60 my-10 drop-shadow-xl"),m(e,"class","flex flex-col gap-5 w-full items-center")},m(f,o){O(f,e,o),d(e,t),d(e,l),c[u].m(e,null),i=!0},p(f,[o]){let h=u;u=v(f),u===h?c[u].p(f,o):(He(),Z(c[h],1,1,()=>{c[h]=null}),ze(),r=c[u],r?r.p(f,o):(r=c[u]=n[u](f),r.c()),W(r,1),r.m(e,null))},i(f){i||(W(r),i=!0)},o(f){Z(r),i=!1},d(f){f&&p(e),c[u].d()}}}function ft(s,e,t){let a,l,u;ve(s,Re,c=>t(4,a=c)),ve(s,je,c=>t(1,l=c)),ve(s,it,c=>t(5,u=c));let r;Ke(()=>{t(0,r=u.url.searchParams.get("id")||"")});let i=new Xe;function n(c,v){s.$$.not_equal(l[r].teams[v],c)&&(l[r].teams[v]=c,je.set(l))}return s.$$.update=()=>{s.$$.dirty&3&&t(2,i=l[r]),s.$$.dirty&4&&Qe(Re,a=i?.name,a)},[r,l,i,n]}class yt extends Te{constructor(e){super(),Ee(this,e,ft,dt,ke,{})}}export{yt as component};
