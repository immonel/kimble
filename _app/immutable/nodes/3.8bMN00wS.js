import{s as Ee,n as J,r as Ke,b as we,f as ke,h as Qe,e as ye,o as We,i as Xe}from"../chunks/scheduler.8xorJwSQ.js";import{S as Pe,i as Ie,e as Ne,a as R,f as _,g as h,m as I,s as B,h as b,j as g,n as C,c as V,x as oe,k as m,z as d,y as F,o as S,A as Te,r as qe,u as Ge,v as He,d as q,t as K,w as ze,b as Fe,p as Je,B as Ye}from"../chunks/index.cMEIfIjL.js";import{e as Re}from"../chunks/each.-oqiv04n.js";import{c as P,G as Ze,a as je}from"../chunks/game.tkEOXXlm.js";import{p as xe,g as Oe}from"../chunks/store.GPvSgBr-.js";import{p as $e}from"../chunks/stores.JBb2EZet.js";import{k as et}from"../chunks/kimble.NAErm6TE.js";function Ue(s){let t,e,a,l,i,o=s[0].name+"",u,n,r,y='<i class="bi-x-lg"><span class="sr-only">Close modal</span></i>',f,c,p,v,G,w=s[0].penalty+"",k,j,H,z,L,re,ie,ue,Q=s[0].raises+"",Y,ce,A,D,W,de,Z,$,fe,N,X,me,ee,pe,x,_e,te,he,O,Ce="Reset points",le,be,Be;return{c(){t=h("div"),e=h("div"),a=h("div"),l=h("div"),i=h("h3"),u=I(o),n=B(),r=h("button"),r.innerHTML=y,c=B(),p=h("div"),v=h("p"),G=I("Total penalty: "),k=I(w),j=B(),H=h("br"),z=I(`
                    Penalty left: `),L=I(s[2]),re=B(),ie=h("br"),ue=I(`
                    Raises: `),Y=I(Q),ce=B(),A=h("div"),D=h("button"),W=h("i"),de=I(`
                    Remove penalty`),fe=B(),N=h("button"),X=h("i"),me=I(`
                    Add penalty`),pe=B(),x=h("button"),_e=I("ðŸ‘‘ Raise"),he=B(),O=h("button"),O.textContent=Ce,this.h()},l(T){t=b(T,"DIV",{tabindex:!0,"aria-hidden":!0,class:!0});var E=g(t);e=b(E,"DIV",{class:!0});var Ve=g(e);a=b(Ve,"DIV",{class:!0});var se=g(a);l=b(se,"DIV",{class:!0});var ae=g(l);i=b(ae,"H3",{class:!0});var De=g(i);u=C(De,o),De.forEach(_),n=V(ae),r=b(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-19ft4hj"&&(r.innerHTML=y),ae.forEach(_),c=V(se),p=b(se,"DIV",{class:!0});var U=g(p);v=b(U,"P",{class:!0});var M=g(v);G=C(M,"Total penalty: "),k=C(M,w),j=V(M),H=b(M,"BR",{}),z=C(M,`
                    Penalty left: `),L=C(M,s[2]),re=V(M),ie=b(M,"BR",{}),ue=C(M,`
                    Raises: `),Y=C(M,Q),M.forEach(_),ce=V(U),A=b(U,"DIV",{});var ne=g(A);D=b(ne,"BUTTON",{class:!0});var ve=g(D);W=b(ve,"I",{class:!0}),g(W).forEach(_),de=C(ve,`
                    Remove penalty`),ve.forEach(_),fe=V(ne),N=b(ne,"BUTTON",{class:!0});var ge=g(N);X=b(ge,"I",{class:!0}),g(X).forEach(_),me=C(ge,`
                    Add penalty`),ge.forEach(_),ne.forEach(_),pe=V(U),x=b(U,"BUTTON",{class:!0});var Me=g(x);_e=C(Me,"ðŸ‘‘ Raise"),Me.forEach(_),he=V(U),O=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(O)!=="svelte-2vfkv8"&&(O.textContent=Ce),U.forEach(_),se.forEach(_),Ve.forEach(_),E.forEach(_),this.h()},h(){m(i,"class","text-xl font-semibold truncate"),m(r,"type","button"),m(r,"class","rounded-lg text-sm ml-6 w-8 h-8 ms-auto inline-flex justify-center items-center"),m(l,"class",f="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[s[0].color].bgPrimary),m(v,"class","text-base leading-relaxed"),m(W,"class","bi-dash-lg"),D.disabled=Z=!(s[2]>0),m(D,"class",$="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary+" disabled:opacity-50"),m(X,"class","bi-plus-lg"),m(N,"class",ee="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary),m(x,"class",te="drop-shadow-md p-4 rounded-xl w-4/5 "+P[s[0].color].bgPrimary),m(O,"class","p-2 rounded-xl w-4/5 text-red-700"),m(p,"class",le="p-4 md:p-5 space-y-4 rounded-b-xl "+P[s[0].color].bgSecondary),m(a,"class","relative rounded-lg shadow"),m(e,"class","relative p-4 w-full max-w-2xl max-h-full"),m(t,"tabindex","-1"),m(t,"aria-hidden","true"),m(t,"class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full")},m(T,E){R(T,t,E),d(t,e),d(e,a),d(a,l),d(l,i),d(i,u),d(l,n),d(l,r),d(a,c),d(a,p),d(p,v),d(v,G),d(v,k),d(v,j),d(v,H),d(v,z),d(v,L),d(v,re),d(v,ie),d(v,ue),d(v,Y),d(p,ce),d(p,A),d(A,D),d(D,W),d(D,de),d(A,fe),d(A,N),d(N,X),d(N,me),d(p,pe),d(p,x),d(x,_e),d(p,he),d(p,O),be||(Be=[F(r,"click",s[3]),F(D,"click",s[5]),F(N,"click",s[4]),F(x,"click",s[6]),F(O,"click",s[7])],be=!0)},p(T,E){E&1&&o!==(o=T[0].name+"")&&S(u,o),E&1&&f!==(f="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[T[0].color].bgPrimary)&&m(l,"class",f),E&1&&w!==(w=T[0].penalty+"")&&S(k,w),E&4&&S(L,T[2]),E&1&&Q!==(Q=T[0].raises+"")&&S(Y,Q),E&4&&Z!==(Z=!(T[2]>0))&&(D.disabled=Z),E&1&&$!==($="drop-shadow-md p-4 rounded-xl w-2/5 "+P[T[0].color].bgPrimary+" disabled:opacity-50")&&m(D,"class",$),E&1&&ee!==(ee="drop-shadow-md p-4 rounded-xl w-2/5 "+P[T[0].color].bgPrimary)&&m(N,"class",ee),E&1&&te!==(te="drop-shadow-md p-4 rounded-xl w-4/5 "+P[T[0].color].bgPrimary)&&m(x,"class",te),E&1&&le!==(le="p-4 md:p-5 space-y-4 rounded-b-xl "+P[T[0].color].bgSecondary)&&m(p,"class",le)},d(T){T&&_(t),be=!1,Ke(Be)}}}function tt(s){let t,e=s[1]&&Ue(s);return{c(){e&&e.c(),t=Ne()},l(a){e&&e.l(a),t=Ne()},m(a,l){e&&e.m(a,l),R(a,t,l)},p(a,[l]){a[1]?e?e.p(a,l):(e=Ue(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:J,o:J,d(a){a&&_(t),e&&e.d(a)}}}function lt(s,t,e){let a,{team:l}=t,{visible:i=!1}=t;const o=()=>e(1,i=!1),u=()=>e(0,l.penalty+=1,l),n=()=>e(0,l.points+=1,l),r=()=>e(0,l.raises+=1,l),y=()=>{confirm("Are you sure?")&&(e(0,l.penalty=0,l),e(0,l.points=0,l),e(0,l.raises=0,l))};return s.$$set=f=>{"team"in f&&e(0,l=f.team),"visible"in f&&e(1,i=f.visible)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,u,n,r,y]}class st extends Pe{constructor(t){super(),Ie(this,t,lt,tt,Ee,{team:0,visible:1})}}function at(s){let t,e="Not in game";return{c(){t=h("button"),t.textContent=e,this.h()},l(a){t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1nlrkt6"&&(t.textContent=e),this.h()},h(){m(t,"class","p-3 w-full h-20 rounded-xl flex justify-between bg-grey-300 ")},m(a,l){R(a,t,l)},p:J,d(a){a&&_(t)}}}function nt(s){let t,e,a,l=s[0].name+"",i,o,u,n="ðŸ‘‘".repeat(Math.min(s[0].raises,Le))+"",r,y,f,c,p,v,G;return{c(){t=h("button"),e=h("div"),a=h("p"),i=I(l),o=B(),u=h("p"),r=I(n),y=B(),f=h("div"),c=I(s[2]),this.h()},l(w){t=b(w,"BUTTON",{class:!0});var k=g(t);e=b(k,"DIV",{class:!0});var j=g(e);a=b(j,"P",{class:!0});var H=g(a);i=C(H,l),H.forEach(_),o=V(j),u=b(j,"P",{});var z=g(u);r=C(z,n),z.forEach(_),j.forEach(_),y=V(k),f=b(k,"DIV",{class:!0});var L=g(f);c=C(L,s[2]),L.forEach(_),k.forEach(_),this.h()},h(){m(a,"class","truncate"),m(e,"class","flex flex-col text-start truncate"),m(f,"class","self-center text-2xl ml-4"),m(t,"class",p=""+P[s[0].color].class+" hover:"+P[s[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")},m(w,k){R(w,t,k),d(t,e),d(e,a),d(a,i),d(e,o),d(e,u),d(u,r),d(t,y),d(t,f),d(f,c),v||(G=F(t,"click",s[3]),v=!0)},p(w,k){k&1&&l!==(l=w[0].name+"")&&S(i,l),k&1&&n!==(n="ðŸ‘‘".repeat(Math.min(w[0].raises,Le))+"")&&S(r,n),k&4&&S(c,w[2]),k&1&&p!==(p=""+P[w[0].color].class+" hover:"+P[w[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")&&m(t,"class",p)},d(w){w&&_(t),v=!1,G()}}}function ot(s){let t,e,a,l,i;function o(c,p){return c[0]?nt:at}let u=o(s),n=u(s);function r(c){s[4](c)}function y(c){s[5](c)}let f={};return s[0]!==void 0&&(f.team=s[0]),s[1]!==void 0&&(f.visible=s[1]),e=new st({props:f}),we.push(()=>Te(e,"team",r)),we.push(()=>Te(e,"visible",y)),{c(){n.c(),t=B(),qe(e.$$.fragment)},l(c){n.l(c),t=V(c),Ge(e.$$.fragment,c)},m(c,p){n.m(c,p),R(c,t,p),He(e,c,p),i=!0},p(c,[p]){u===(u=o(c))&&n?n.p(c,p):(n.d(1),n=u(c),n&&(n.c(),n.m(t.parentNode,t)));const v={};!a&&p&1&&(a=!0,v.team=c[0],ke(()=>a=!1)),!l&&p&2&&(l=!0,v.visible=c[1],ke(()=>l=!1)),e.$set(v)},i(c){i||(q(e.$$.fragment,c),i=!0)},o(c){K(e.$$.fragment,c),i=!1},d(c){c&&_(t),n.d(c),ze(e,c)}}}const Le=5;function rt(s,t,e){let a,{team:l}=t,i=!1;const o=()=>e(1,i=!0);function u(r){l=r,e(0,l)}function n(r){i=r,e(1,i)}return s.$$set=r=>{"team"in r&&e(0,l=r.team)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,u,n]}class it extends Pe{constructor(t){super(),Ie(this,t,rt,ot,Ee,{team:0})}}function Ae(s,t,e){const a=s.slice();return a[6]=t[e],a[7]=t,a[8]=e,a}function ut(s){let t,e="Loading game...";return{c(){t=h("p"),t.textContent=e},l(a){t=b(a,"P",{"data-svelte-h":!0}),oe(t)!=="svelte-1ttrtic"&&(t.textContent=e)},m(a,l){R(a,t,l)},p:J,i:J,o:J,d(a){a&&_(t)}}}function ct(s){let t,e,a=Re(je),l=[];for(let o=0;o<a.length;o+=1)l[o]=Se(Ae(s,a,o));const i=o=>K(l[o],1,1,()=>{l[o]=null});return{c(){t=h("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=b(o,"DIV",{class:!0});var u=g(t);for(let n=0;n<l.length;n+=1)l[n].l(u);u.forEach(_),this.h()},h(){m(t,"class","flex -mx-1 -px-1 flex-wrap w-11/12 lg:w-1/3")},m(o,u){R(o,t,u);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);e=!0},p(o,u){if(u&3){a=Re(je);let n;for(n=0;n<a.length;n+=1){const r=Ae(o,a,n);l[n]?(l[n].p(r,u),q(l[n],1)):(l[n]=Se(r),l[n].c(),q(l[n],1),l[n].m(t,null))}for(Je(),n=a.length;n<l.length;n+=1)i(n);Fe()}},i(o){if(!e){for(let u=0;u<a.length;u+=1)q(l[u]);e=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)K(l[u]);e=!1},d(o){o&&_(t),Ye(l,o)}}}function Se(s){let t,e,a,l,i;function o(n){s[3](n,s[6])}let u={};return s[1][s[0]].teams[s[6]]!==void 0&&(u.team=s[1][s[0]].teams[s[6]]),e=new it({props:u}),we.push(()=>Te(e,"team",o)),{c(){t=h("div"),qe(e.$$.fragment),l=B(),this.h()},l(n){t=b(n,"DIV",{class:!0});var r=g(t);Ge(e.$$.fragment,r),l=V(r),r.forEach(_),this.h()},h(){m(t,"class","w-1/2 px-1 py-1")},m(n,r){R(n,t,r),He(e,t,null),d(t,l),i=!0},p(n,r){s=n;const y={};!a&&r&3&&(a=!0,y.team=s[1][s[0]].teams[s[6]],ke(()=>a=!1)),e.$set(y)},i(n){i||(q(e.$$.fragment,n),i=!0)},o(n){K(e.$$.fragment,n),i=!1},d(n){n&&_(t),ze(e)}}}function dt(s){let t,e,a,l,i,o,u;const n=[ct,ut],r=[];function y(f,c){return f[1][f[0]]?0:1}return i=y(s),o=r[i]=n[i](s),{c(){t=h("div"),e=h("img"),l=B(),o.c(),this.h()},l(f){t=b(f,"DIV",{class:!0});var c=g(t);e=b(c,"IMG",{src:!0,alt:!0,class:!0}),l=V(c),o.l(c),c.forEach(_),this.h()},h(){Qe(e.src,a=et)||m(e,"src",a),m(e,"alt","kimble logo"),m(e,"class","w-60 my-10 drop-shadow-xl"),m(t,"class","flex flex-col gap-5 w-full items-center")},m(f,c){R(f,t,c),d(t,e),d(t,l),r[i].m(t,null),u=!0},p(f,[c]){let p=i;i=y(f),i===p?r[i].p(f,c):(Je(),K(r[p],1,1,()=>{r[p]=null}),Fe(),o=r[i],o?o.p(f,c):(o=r[i]=n[i](f),o.c()),q(o,1),o.m(t,null))},i(f){u||(q(o),u=!0)},o(f){K(o),u=!1},d(f){f&&_(t),r[i].d()}}}function ft(s,t,e){let a,l,i;ye(s,xe,r=>e(4,a=r)),ye(s,Oe,r=>e(1,l=r)),ye(s,$e,r=>e(5,i=r));let o;We(()=>{e(0,o=i.url.searchParams.get("id")||"")});let u=new Ze;function n(r,y){s.$$.not_equal(l[o].teams[y],r)&&(l[o].teams[y]=r,Oe.set(l))}return s.$$.update=()=>{s.$$.dirty&3&&e(2,u=l[o]),s.$$.dirty&4&&Xe(xe,a=u?.name,a)},[o,l,u,n]}class yt extends Pe{constructor(t){super(),Ie(this,t,ft,dt,Ee,{})}}export{yt as component};
