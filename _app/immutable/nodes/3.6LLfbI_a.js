import{s as ke,n as W,r as Fe,b as ge,f as ye,h as Je,e as ve,o as Ke,i as Qe}from"../chunks/scheduler.8xorJwSQ.js";import{S as Te,i as Ee,e as Ve,a as U,f as p,g as _,s as B,m as I,h as b,j as g,c as V,x as re,n as C,k as m,z as d,A as De,y as H,o as F,B as we,r as Se,u as Ae,v as qe,d as J,t as X,w as Ge,b as ze,p as He,C as We}from"../chunks/index.L_Ej_rLE.js";import{e as Ne}from"../chunks/each.-oqiv04n.js";import{c as P,G as Xe,a as Me}from"../chunks/game.11GcYjVd.js";import{p as Re,g as je}from"../chunks/store.GPvSgBr-.js";import{d as Ye}from"../chunks/singletons.5tmSm9Mh.js";import{k as Ze}from"../chunks/kimble.NAErm6TE.js";function Ue(s){let t,e,a,l,u,r,i,n='<i class="bi-x-lg"><span class="sr-only">Close modal</span></i>',c,h,f,o,v,T=s[0].penalty+"",M,O,G,K,y,k,x,Q,L=s[0].raises+"",R,ie,z,D,Y,ue,$,ee,ce,j,Z,de,te,fe,S,me,le,pe,A,Pe="Reset points",se,_e,Ie;return{c(){t=_("div"),e=_("div"),a=_("div"),l=_("div"),u=_("input"),r=B(),i=_("button"),i.innerHTML=n,h=B(),f=_("div"),o=_("p"),v=I("Total penalty: "),M=I(T),O=B(),G=_("br"),K=I(`
                    Penalty left: `),y=I(s[2]),k=B(),x=_("br"),Q=I(`
                    Raises: `),R=I(L),ie=B(),z=_("div"),D=_("button"),Y=_("i"),ue=I(`
                    Remove penalty`),ce=B(),j=_("button"),Z=_("i"),de=I(`
                    Add penalty`),fe=B(),S=_("button"),me=I("ðŸ‘‘ Raise"),pe=B(),A=_("button"),A.textContent=Pe,this.h()},l(w){t=b(w,"DIV",{tabindex:!0,"aria-hidden":!0,class:!0});var E=g(t);e=b(E,"DIV",{class:!0});var Ce=g(e);a=b(Ce,"DIV",{class:!0});var ae=g(a);l=b(ae,"DIV",{class:!0});var ne=g(l);u=b(ne,"INPUT",{placeholder:!0,class:!0}),r=V(ne),i=b(ne,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),re(i)!=="svelte-19ft4hj"&&(i.innerHTML=n),ne.forEach(p),h=V(ae),f=b(ae,"DIV",{class:!0});var q=g(f);o=b(q,"P",{class:!0});var N=g(o);v=C(N,"Total penalty: "),M=C(N,T),O=V(N),G=b(N,"BR",{}),K=C(N,`
                    Penalty left: `),y=C(N,s[2]),k=V(N),x=b(N,"BR",{}),Q=C(N,`
                    Raises: `),R=C(N,L),N.forEach(p),ie=V(q),z=b(q,"DIV",{});var oe=g(z);D=b(oe,"BUTTON",{class:!0});var be=g(D);Y=b(be,"I",{class:!0}),g(Y).forEach(p),ue=C(be,`
                    Remove penalty`),be.forEach(p),ce=V(oe),j=b(oe,"BUTTON",{class:!0});var he=g(j);Z=b(he,"I",{class:!0}),g(Z).forEach(p),de=C(he,`
                    Add penalty`),he.forEach(p),oe.forEach(p),fe=V(q),S=b(q,"BUTTON",{class:!0});var Be=g(S);me=C(Be,"ðŸ‘‘ Raise"),Be.forEach(p),pe=V(q),A=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),re(A)!=="svelte-2vfkv8"&&(A.textContent=Pe),q.forEach(p),ae.forEach(p),Ce.forEach(p),E.forEach(p),this.h()},h(){m(u,"placeholder","Team name"),m(u,"class","bg-transparent text-xl font-semibold truncate"),m(i,"type","button"),m(i,"class","rounded-lg text-sm ml-6 w-8 h-8 ms-auto inline-flex justify-center items-center"),m(l,"class",c="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[s[0].color].bgPrimary),m(o,"class","text-base leading-relaxed"),m(Y,"class","bi-dash-lg"),D.disabled=$=!(s[2]>0),m(D,"class",ee="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary+" disabled:opacity-50"),m(Z,"class","bi-plus-lg"),m(j,"class",te="drop-shadow-md p-4 rounded-xl w-2/5 "+P[s[0].color].bgPrimary),m(S,"class",le="drop-shadow-md p-4 rounded-xl w-4/5 "+P[s[0].color].bgPrimary),m(A,"class","p-2 rounded-xl w-4/5 text-red-700"),m(f,"class",se="p-4 md:p-5 space-y-4 rounded-b-xl "+P[s[0].color].bgSecondary),m(a,"class","relative rounded-lg shadow"),m(e,"class","relative p-4 w-full max-w-2xl max-h-full"),m(t,"tabindex","-1"),m(t,"aria-hidden","true"),m(t,"class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full")},m(w,E){U(w,t,E),d(t,e),d(e,a),d(a,l),d(l,u),De(u,s[0].name),d(l,r),d(l,i),d(a,h),d(a,f),d(f,o),d(o,v),d(o,M),d(o,O),d(o,G),d(o,K),d(o,y),d(o,k),d(o,x),d(o,Q),d(o,R),d(f,ie),d(f,z),d(z,D),d(D,Y),d(D,ue),d(z,ce),d(z,j),d(j,Z),d(j,de),d(f,fe),d(f,S),d(S,me),d(f,pe),d(f,A),_e||(Ie=[H(u,"input",s[8]),H(i,"click",s[3]),H(D,"click",s[5]),H(j,"click",s[4]),H(S,"click",s[6]),H(A,"click",s[7])],_e=!0)},p(w,E){E&1&&u.value!==w[0].name&&De(u,w[0].name),E&1&&c!==(c="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+P[w[0].color].bgPrimary)&&m(l,"class",c),E&1&&T!==(T=w[0].penalty+"")&&F(M,T),E&4&&F(y,w[2]),E&1&&L!==(L=w[0].raises+"")&&F(R,L),E&4&&$!==($=!(w[2]>0))&&(D.disabled=$),E&1&&ee!==(ee="drop-shadow-md p-4 rounded-xl w-2/5 "+P[w[0].color].bgPrimary+" disabled:opacity-50")&&m(D,"class",ee),E&1&&te!==(te="drop-shadow-md p-4 rounded-xl w-2/5 "+P[w[0].color].bgPrimary)&&m(j,"class",te),E&1&&le!==(le="drop-shadow-md p-4 rounded-xl w-4/5 "+P[w[0].color].bgPrimary)&&m(S,"class",le),E&1&&se!==(se="p-4 md:p-5 space-y-4 rounded-b-xl "+P[w[0].color].bgSecondary)&&m(f,"class",se)},d(w){w&&p(t),_e=!1,Fe(Ie)}}}function $e(s){let t,e=s[1]&&Ue(s);return{c(){e&&e.c(),t=Ve()},l(a){e&&e.l(a),t=Ve()},m(a,l){e&&e.m(a,l),U(a,t,l)},p(a,[l]){a[1]?e?e.p(a,l):(e=Ue(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:W,o:W,d(a){a&&p(t),e&&e.d(a)}}}function et(s,t,e){let a,{team:l}=t,{visible:u=!1}=t;const r=()=>e(1,u=!1),i=()=>e(0,l.penalty+=1,l),n=()=>e(0,l.points+=1,l),c=()=>e(0,l.raises+=1,l),h=()=>{confirm("Are you sure?")&&(e(0,l.penalty=0,l),e(0,l.points=0,l),e(0,l.raises=0,l))};function f(){l.name=this.value,e(0,l)}return s.$$set=o=>{"team"in o&&e(0,l=o.team),"visible"in o&&e(1,u=o.visible)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,u,a,r,i,n,c,h,f]}class tt extends Te{constructor(t){super(),Ee(this,t,et,$e,ke,{team:0,visible:1})}}function lt(s){let t,e="Not in game";return{c(){t=_("button"),t.textContent=e,this.h()},l(a){t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1nlrkt6"&&(t.textContent=e),this.h()},h(){m(t,"class","p-3 w-full h-20 rounded-xl flex justify-between bg-grey-300 ")},m(a,l){U(a,t,l)},p:W,d(a){a&&p(t)}}}function st(s){let t,e,a,l=s[0].name+"",u,r,i,n="ðŸ‘‘".repeat(Math.min(s[0].raises,Oe))+"",c,h,f,o,v,T=s[0].penalty+"",M,O,G,K;return{c(){t=_("button"),e=_("div"),a=_("p"),u=I(l),r=B(),i=_("p"),c=I(n),h=B(),f=_("div"),o=I(s[2]),v=I(" / "),M=I(T),this.h()},l(y){t=b(y,"BUTTON",{class:!0});var k=g(t);e=b(k,"DIV",{class:!0});var x=g(e);a=b(x,"P",{class:!0});var Q=g(a);u=C(Q,l),Q.forEach(p),r=V(x),i=b(x,"P",{});var L=g(i);c=C(L,n),L.forEach(p),x.forEach(p),h=V(k),f=b(k,"DIV",{class:!0});var R=g(f);o=C(R,s[2]),v=C(R," / "),M=C(R,T),R.forEach(p),k.forEach(p),this.h()},h(){m(a,"class","truncate"),m(e,"class","flex flex-col text-start truncate"),m(f,"class","self-center text-2xl ml-4"),m(t,"class",O=""+P[s[0].color].class+" hover:"+P[s[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")},m(y,k){U(y,t,k),d(t,e),d(e,a),d(a,u),d(e,r),d(e,i),d(i,c),d(t,h),d(t,f),d(f,o),d(f,v),d(f,M),G||(K=H(t,"click",s[3]),G=!0)},p(y,k){k&1&&l!==(l=y[0].name+"")&&F(u,l),k&1&&n!==(n="ðŸ‘‘".repeat(Math.min(y[0].raises,Oe))+"")&&F(c,n),k&4&&F(o,y[2]),k&1&&T!==(T=y[0].penalty+"")&&F(M,T),k&1&&O!==(O=""+P[y[0].color].class+" hover:"+P[y[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")&&m(t,"class",O)},d(y){y&&p(t),G=!1,K()}}}function at(s){let t,e,a,l,u;function r(o,v){return o[0]?st:lt}let i=r(s),n=i(s);function c(o){s[4](o)}function h(o){s[5](o)}let f={};return s[0]!==void 0&&(f.team=s[0]),s[1]!==void 0&&(f.visible=s[1]),e=new tt({props:f}),ge.push(()=>we(e,"team",c)),ge.push(()=>we(e,"visible",h)),{c(){n.c(),t=B(),Se(e.$$.fragment)},l(o){n.l(o),t=V(o),Ae(e.$$.fragment,o)},m(o,v){n.m(o,v),U(o,t,v),qe(e,o,v),u=!0},p(o,[v]){i===(i=r(o))&&n?n.p(o,v):(n.d(1),n=i(o),n&&(n.c(),n.m(t.parentNode,t)));const T={};!a&&v&1&&(a=!0,T.team=o[0],ye(()=>a=!1)),!l&&v&2&&(l=!0,T.visible=o[1],ye(()=>l=!1)),e.$set(T)},i(o){u||(J(e.$$.fragment,o),u=!0)},o(o){X(e.$$.fragment,o),u=!1},d(o){o&&p(t),n.d(o),Ge(e,o)}}}const Oe=5;function nt(s,t,e){let a,{team:l}=t,u=!1;const r=()=>e(1,u=!0);function i(c){l=c,e(0,l)}function n(c){u=c,e(1,u)}return s.$$set=c=>{"team"in c&&e(0,l=c.team)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,u,a,r,i,n]}class ot extends Te{constructor(t){super(),Ee(this,t,nt,at,ke,{team:0})}}const rt=()=>{const s=Ye;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},it={subscribe(s){return rt().page.subscribe(s)}};function xe(s,t,e){const a=s.slice();return a[6]=t[e],a[7]=t,a[8]=e,a}function ut(s){let t,e="Loading game...";return{c(){t=_("p"),t.textContent=e},l(a){t=b(a,"P",{"data-svelte-h":!0}),re(t)!=="svelte-1ttrtic"&&(t.textContent=e)},m(a,l){U(a,t,l)},p:W,i:W,o:W,d(a){a&&p(t)}}}function ct(s){let t,e,a=Ne(Me),l=[];for(let r=0;r<a.length;r+=1)l[r]=Le(xe(s,a,r));const u=r=>X(l[r],1,1,()=>{l[r]=null});return{c(){t=_("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){t=b(r,"DIV",{class:!0});var i=g(t);for(let n=0;n<l.length;n+=1)l[n].l(i);i.forEach(p),this.h()},h(){m(t,"class","flex -mx-1 -px-1 flex-wrap w-11/12 lg:w-1/3")},m(r,i){U(r,t,i);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);e=!0},p(r,i){if(i&3){a=Ne(Me);let n;for(n=0;n<a.length;n+=1){const c=xe(r,a,n);l[n]?(l[n].p(c,i),J(l[n],1)):(l[n]=Le(c),l[n].c(),J(l[n],1),l[n].m(t,null))}for(He(),n=a.length;n<l.length;n+=1)u(n);ze()}},i(r){if(!e){for(let i=0;i<a.length;i+=1)J(l[i]);e=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)X(l[i]);e=!1},d(r){r&&p(t),We(l,r)}}}function Le(s){let t,e,a,l,u;function r(n){s[3](n,s[6])}let i={};return s[1][s[0]].teams[s[6]]!==void 0&&(i.team=s[1][s[0]].teams[s[6]]),e=new ot({props:i}),ge.push(()=>we(e,"team",r)),{c(){t=_("div"),Se(e.$$.fragment),l=B(),this.h()},l(n){t=b(n,"DIV",{class:!0});var c=g(t);Ae(e.$$.fragment,c),l=V(c),c.forEach(p),this.h()},h(){m(t,"class","w-1/2 px-1 py-1")},m(n,c){U(n,t,c),qe(e,t,null),d(t,l),u=!0},p(n,c){s=n;const h={};!a&&c&3&&(a=!0,h.team=s[1][s[0]].teams[s[6]],ye(()=>a=!1)),e.$set(h)},i(n){u||(J(e.$$.fragment,n),u=!0)},o(n){X(e.$$.fragment,n),u=!1},d(n){n&&p(t),Ge(e)}}}function dt(s){let t,e,a,l,u,r,i;const n=[ct,ut],c=[];function h(f,o){return f[1][f[0]]?0:1}return u=h(s),r=c[u]=n[u](s),{c(){t=_("div"),e=_("img"),l=B(),r.c(),this.h()},l(f){t=b(f,"DIV",{class:!0});var o=g(t);e=b(o,"IMG",{src:!0,alt:!0,class:!0}),l=V(o),r.l(o),o.forEach(p),this.h()},h(){Je(e.src,a=Ze)||m(e,"src",a),m(e,"alt","kimble logo"),m(e,"class","w-60 my-10 drop-shadow-xl"),m(t,"class","flex flex-col gap-5 w-full items-center")},m(f,o){U(f,t,o),d(t,e),d(t,l),c[u].m(t,null),i=!0},p(f,[o]){let v=u;u=h(f),u===v?c[u].p(f,o):(He(),X(c[v],1,1,()=>{c[v]=null}),ze(),r=c[u],r?r.p(f,o):(r=c[u]=n[u](f),r.c()),J(r,1),r.m(t,null))},i(f){i||(J(r),i=!0)},o(f){X(r),i=!1},d(f){f&&p(t),c[u].d()}}}function ft(s,t,e){let a,l,u;ve(s,Re,c=>e(4,a=c)),ve(s,je,c=>e(1,l=c)),ve(s,it,c=>e(5,u=c));let r;Ke(()=>{e(0,r=u.url.searchParams.get("id")||"")});let i=new Xe;function n(c,h){s.$$.not_equal(l[r].teams[h],c)&&(l[r].teams[h]=c,je.set(l))}return s.$$.update=()=>{s.$$.dirty&3&&e(2,i=l[r]),s.$$.dirty&4&&Qe(Re,a=i?.name,a)},[r,l,i,n]}class yt extends Te{constructor(t){super(),Ee(this,t,ft,dt,ke,{})}}export{yt as component};
