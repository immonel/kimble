import{s as Ee,n as W,r as Ke,b as we,f as ke,h as Qe,e as ye,o as We,i as Xe}from"../chunks/scheduler.8xorJwSQ.js";import{S as Pe,i as Ie,e as Ne,a as x,f as _,g as h,m as P,s as B,h as b,j as g,n as I,c as V,x as ue,k as m,z as u,y as Q,o as G,A as Te,r as qe,u as Ge,v as He,d as z,t as X,w as ze,b as Fe,p as Je,B as Ye}from"../chunks/index.cMEIfIjL.js";import{e as Re}from"../chunks/each.-oqiv04n.js";import{c as C,G as Ze,a as je}from"../chunks/game.tkEOXXlm.js";import{p as xe,g as Oe}from"../chunks/store.GPvSgBr-.js";import{p as $e}from"../chunks/stores.ZKqWPTBC.js";import{k as et}from"../chunks/kimble.NAErm6TE.js";function Ue(s){let t,e,a,l,i,o=s[0].name+"",c,n,r,y='<i class="bi-x-lg"><span class="sr-only">Close modal</span></i>',d,f,p,v,O,N=s[0].penalty+"",U,F,w,k,R,J,K,L,Y=s[0].raises+"",ee,ce,H,D,Z,fe,te,le,de,j,$,me,se,pe,A,_e,ae,he,S,Ce="Reset points",ne,be,Be;return{c(){t=h("div"),e=h("div"),a=h("div"),l=h("div"),i=h("h3"),c=P(o),n=B(),r=h("button"),r.innerHTML=y,f=B(),p=h("div"),v=h("p"),O=P("Total penalty: "),U=P(N),F=B(),w=h("br"),k=P(`
                    Penalty left: `),R=P(s[2]),J=B(),K=h("br"),L=P(`
                    Raises: `),ee=P(Y),ce=B(),H=h("div"),D=h("button"),Z=h("i"),fe=P(`
                    Remove penalty`),de=B(),j=h("button"),$=h("i"),me=P(`
                    Add penalty`),pe=B(),A=h("button"),_e=P("ðŸ‘‘ Raise"),he=B(),S=h("button"),S.textContent=Ce,this.h()},l(T){t=b(T,"DIV",{tabindex:!0,"aria-hidden":!0,class:!0});var E=g(t);e=b(E,"DIV",{class:!0});var Ve=g(e);a=b(Ve,"DIV",{class:!0});var oe=g(a);l=b(oe,"DIV",{class:!0});var re=g(l);i=b(re,"H3",{class:!0});var De=g(i);c=I(De,o),De.forEach(_),n=V(re),r=b(re,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-19ft4hj"&&(r.innerHTML=y),re.forEach(_),f=V(oe),p=b(oe,"DIV",{class:!0});var q=g(p);v=b(q,"P",{class:!0});var M=g(v);O=I(M,"Total penalty: "),U=I(M,N),F=V(M),w=b(M,"BR",{}),k=I(M,`
                    Penalty left: `),R=I(M,s[2]),J=V(M),K=b(M,"BR",{}),L=I(M,`
                    Raises: `),ee=I(M,Y),M.forEach(_),ce=V(q),H=b(q,"DIV",{});var ie=g(H);D=b(ie,"BUTTON",{class:!0});var ve=g(D);Z=b(ve,"I",{class:!0}),g(Z).forEach(_),fe=I(ve,`
                    Remove penalty`),ve.forEach(_),de=V(ie),j=b(ie,"BUTTON",{class:!0});var ge=g(j);$=b(ge,"I",{class:!0}),g($).forEach(_),me=I(ge,`
                    Add penalty`),ge.forEach(_),ie.forEach(_),pe=V(q),A=b(q,"BUTTON",{class:!0});var Me=g(A);_e=I(Me,"ðŸ‘‘ Raise"),Me.forEach(_),he=V(q),S=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(S)!=="svelte-2vfkv8"&&(S.textContent=Ce),q.forEach(_),oe.forEach(_),Ve.forEach(_),E.forEach(_),this.h()},h(){m(i,"class","text-xl font-semibold truncate"),m(r,"type","button"),m(r,"class","rounded-lg text-sm ml-6 w-8 h-8 ms-auto inline-flex justify-center items-center"),m(l,"class",d="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+C[s[0].color].bgPrimary),m(v,"class","text-base leading-relaxed"),m(Z,"class","bi-dash-lg"),D.disabled=te=!(s[2]>0),m(D,"class",le="drop-shadow-md p-4 rounded-xl w-2/5 "+C[s[0].color].bgPrimary+" disabled:opacity-50"),m($,"class","bi-plus-lg"),m(j,"class",se="drop-shadow-md p-4 rounded-xl w-2/5 "+C[s[0].color].bgPrimary),m(A,"class",ae="drop-shadow-md p-4 rounded-xl w-4/5 "+C[s[0].color].bgPrimary),m(S,"class","p-2 rounded-xl w-4/5 text-red-700"),m(p,"class",ne="p-4 md:p-5 space-y-4 rounded-b-xl "+C[s[0].color].bgSecondary),m(a,"class","relative rounded-lg shadow"),m(e,"class","relative p-4 w-full max-w-2xl max-h-full"),m(t,"tabindex","-1"),m(t,"aria-hidden","true"),m(t,"class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full")},m(T,E){x(T,t,E),u(t,e),u(e,a),u(a,l),u(l,i),u(i,c),u(l,n),u(l,r),u(a,f),u(a,p),u(p,v),u(v,O),u(v,U),u(v,F),u(v,w),u(v,k),u(v,R),u(v,J),u(v,K),u(v,L),u(v,ee),u(p,ce),u(p,H),u(H,D),u(D,Z),u(D,fe),u(H,de),u(H,j),u(j,$),u(j,me),u(p,pe),u(p,A),u(A,_e),u(p,he),u(p,S),be||(Be=[Q(r,"click",s[3]),Q(D,"click",s[5]),Q(j,"click",s[4]),Q(A,"click",s[6]),Q(S,"click",s[7])],be=!0)},p(T,E){E&1&&o!==(o=T[0].name+"")&&G(c,o),E&1&&d!==(d="flex items-center justify-between p-4 md:p-5 rounded-t-xl "+C[T[0].color].bgPrimary)&&m(l,"class",d),E&1&&N!==(N=T[0].penalty+"")&&G(U,N),E&4&&G(R,T[2]),E&1&&Y!==(Y=T[0].raises+"")&&G(ee,Y),E&4&&te!==(te=!(T[2]>0))&&(D.disabled=te),E&1&&le!==(le="drop-shadow-md p-4 rounded-xl w-2/5 "+C[T[0].color].bgPrimary+" disabled:opacity-50")&&m(D,"class",le),E&1&&se!==(se="drop-shadow-md p-4 rounded-xl w-2/5 "+C[T[0].color].bgPrimary)&&m(j,"class",se),E&1&&ae!==(ae="drop-shadow-md p-4 rounded-xl w-4/5 "+C[T[0].color].bgPrimary)&&m(A,"class",ae),E&1&&ne!==(ne="p-4 md:p-5 space-y-4 rounded-b-xl "+C[T[0].color].bgSecondary)&&m(p,"class",ne)},d(T){T&&_(t),be=!1,Ke(Be)}}}function tt(s){let t,e=s[1]&&Ue(s);return{c(){e&&e.c(),t=Ne()},l(a){e&&e.l(a),t=Ne()},m(a,l){e&&e.m(a,l),x(a,t,l)},p(a,[l]){a[1]?e?e.p(a,l):(e=Ue(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:W,o:W,d(a){a&&_(t),e&&e.d(a)}}}function lt(s,t,e){let a,{team:l}=t,{visible:i=!1}=t;const o=()=>e(1,i=!1),c=()=>e(0,l.penalty+=1,l),n=()=>e(0,l.points+=1,l),r=()=>e(0,l.raises+=1,l),y=()=>{confirm("Are you sure?")&&(e(0,l.penalty=0,l),e(0,l.points=0,l),e(0,l.raises=0,l))};return s.$$set=d=>{"team"in d&&e(0,l=d.team),"visible"in d&&e(1,i=d.visible)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,c,n,r,y]}class st extends Pe{constructor(t){super(),Ie(this,t,lt,tt,Ee,{team:0,visible:1})}}function at(s){let t,e="Not in game";return{c(){t=h("button"),t.textContent=e,this.h()},l(a){t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1nlrkt6"&&(t.textContent=e),this.h()},h(){m(t,"class","p-3 w-full h-20 rounded-xl flex justify-between bg-grey-300 ")},m(a,l){x(a,t,l)},p:W,d(a){a&&_(t)}}}function nt(s){let t,e,a,l=s[0].name+"",i,o,c,n="ðŸ‘‘".repeat(Math.min(s[0].raises,Le))+"",r,y,d,f,p,v=s[0].penalty+"",O,N,U,F;return{c(){t=h("button"),e=h("div"),a=h("p"),i=P(l),o=B(),c=h("p"),r=P(n),y=B(),d=h("div"),f=P(s[2]),p=P(" / "),O=P(v),this.h()},l(w){t=b(w,"BUTTON",{class:!0});var k=g(t);e=b(k,"DIV",{class:!0});var R=g(e);a=b(R,"P",{class:!0});var J=g(a);i=I(J,l),J.forEach(_),o=V(R),c=b(R,"P",{});var K=g(c);r=I(K,n),K.forEach(_),R.forEach(_),y=V(k),d=b(k,"DIV",{class:!0});var L=g(d);f=I(L,s[2]),p=I(L," / "),O=I(L,v),L.forEach(_),k.forEach(_),this.h()},h(){m(a,"class","truncate"),m(e,"class","flex flex-col text-start truncate"),m(d,"class","self-center text-2xl ml-4"),m(t,"class",N=""+C[s[0].color].class+" hover:"+C[s[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")},m(w,k){x(w,t,k),u(t,e),u(e,a),u(a,i),u(e,o),u(e,c),u(c,r),u(t,y),u(t,d),u(d,f),u(d,p),u(d,O),U||(F=Q(t,"click",s[3]),U=!0)},p(w,k){k&1&&l!==(l=w[0].name+"")&&G(i,l),k&1&&n!==(n="ðŸ‘‘".repeat(Math.min(w[0].raises,Le))+"")&&G(r,n),k&4&&G(f,w[2]),k&1&&v!==(v=w[0].penalty+"")&&G(O,v),k&1&&N!==(N=""+C[w[0].color].class+" hover:"+C[w[0].color].hoverClass+" p-3 w-full h-20 rounded-xl flex justify-between")&&m(t,"class",N)},d(w){w&&_(t),U=!1,F()}}}function ot(s){let t,e,a,l,i;function o(f,p){return f[0]?nt:at}let c=o(s),n=c(s);function r(f){s[4](f)}function y(f){s[5](f)}let d={};return s[0]!==void 0&&(d.team=s[0]),s[1]!==void 0&&(d.visible=s[1]),e=new st({props:d}),we.push(()=>Te(e,"team",r)),we.push(()=>Te(e,"visible",y)),{c(){n.c(),t=B(),qe(e.$$.fragment)},l(f){n.l(f),t=V(f),Ge(e.$$.fragment,f)},m(f,p){n.m(f,p),x(f,t,p),He(e,f,p),i=!0},p(f,[p]){c===(c=o(f))&&n?n.p(f,p):(n.d(1),n=c(f),n&&(n.c(),n.m(t.parentNode,t)));const v={};!a&&p&1&&(a=!0,v.team=f[0],ke(()=>a=!1)),!l&&p&2&&(l=!0,v.visible=f[1],ke(()=>l=!1)),e.$set(v)},i(f){i||(z(e.$$.fragment,f),i=!0)},o(f){X(e.$$.fragment,f),i=!1},d(f){f&&_(t),n.d(f),ze(e,f)}}}const Le=5;function rt(s,t,e){let a,{team:l}=t,i=!1;const o=()=>e(1,i=!0);function c(r){l=r,e(0,l)}function n(r){i=r,e(1,i)}return s.$$set=r=>{"team"in r&&e(0,l=r.team)},s.$$.update=()=>{s.$$.dirty&1&&e(2,a=l.penalty-l.points)},[l,i,a,o,c,n]}class it extends Pe{constructor(t){super(),Ie(this,t,rt,ot,Ee,{team:0})}}function Ae(s,t,e){const a=s.slice();return a[6]=t[e],a[7]=t,a[8]=e,a}function ut(s){let t,e="Loading game...";return{c(){t=h("p"),t.textContent=e},l(a){t=b(a,"P",{"data-svelte-h":!0}),ue(t)!=="svelte-1ttrtic"&&(t.textContent=e)},m(a,l){x(a,t,l)},p:W,i:W,o:W,d(a){a&&_(t)}}}function ct(s){let t,e,a=Re(je),l=[];for(let o=0;o<a.length;o+=1)l[o]=Se(Ae(s,a,o));const i=o=>X(l[o],1,1,()=>{l[o]=null});return{c(){t=h("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=b(o,"DIV",{class:!0});var c=g(t);for(let n=0;n<l.length;n+=1)l[n].l(c);c.forEach(_),this.h()},h(){m(t,"class","flex -mx-1 -px-1 flex-wrap w-11/12 lg:w-1/3")},m(o,c){x(o,t,c);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);e=!0},p(o,c){if(c&3){a=Re(je);let n;for(n=0;n<a.length;n+=1){const r=Ae(o,a,n);l[n]?(l[n].p(r,c),z(l[n],1)):(l[n]=Se(r),l[n].c(),z(l[n],1),l[n].m(t,null))}for(Je(),n=a.length;n<l.length;n+=1)i(n);Fe()}},i(o){if(!e){for(let c=0;c<a.length;c+=1)z(l[c]);e=!0}},o(o){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)X(l[c]);e=!1},d(o){o&&_(t),Ye(l,o)}}}function Se(s){let t,e,a,l,i;function o(n){s[3](n,s[6])}let c={};return s[1][s[0]].teams[s[6]]!==void 0&&(c.team=s[1][s[0]].teams[s[6]]),e=new it({props:c}),we.push(()=>Te(e,"team",o)),{c(){t=h("div"),qe(e.$$.fragment),l=B(),this.h()},l(n){t=b(n,"DIV",{class:!0});var r=g(t);Ge(e.$$.fragment,r),l=V(r),r.forEach(_),this.h()},h(){m(t,"class","w-1/2 px-1 py-1")},m(n,r){x(n,t,r),He(e,t,null),u(t,l),i=!0},p(n,r){s=n;const y={};!a&&r&3&&(a=!0,y.team=s[1][s[0]].teams[s[6]],ke(()=>a=!1)),e.$set(y)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){n&&_(t),ze(e)}}}function ft(s){let t,e,a,l,i,o,c;const n=[ct,ut],r=[];function y(d,f){return d[1][d[0]]?0:1}return i=y(s),o=r[i]=n[i](s),{c(){t=h("div"),e=h("img"),l=B(),o.c(),this.h()},l(d){t=b(d,"DIV",{class:!0});var f=g(t);e=b(f,"IMG",{src:!0,alt:!0,class:!0}),l=V(f),o.l(f),f.forEach(_),this.h()},h(){Qe(e.src,a=et)||m(e,"src",a),m(e,"alt","kimble logo"),m(e,"class","w-60 my-10 drop-shadow-xl"),m(t,"class","flex flex-col gap-5 w-full items-center")},m(d,f){x(d,t,f),u(t,e),u(t,l),r[i].m(t,null),c=!0},p(d,[f]){let p=i;i=y(d),i===p?r[i].p(d,f):(Je(),X(r[p],1,1,()=>{r[p]=null}),Fe(),o=r[i],o?o.p(d,f):(o=r[i]=n[i](d),o.c()),z(o,1),o.m(t,null))},i(d){c||(z(o),c=!0)},o(d){X(o),c=!1},d(d){d&&_(t),r[i].d()}}}function dt(s,t,e){let a,l,i;ye(s,xe,r=>e(4,a=r)),ye(s,Oe,r=>e(1,l=r)),ye(s,$e,r=>e(5,i=r));let o;We(()=>{e(0,o=i.url.searchParams.get("id")||"")});let c=new Ze;function n(r,y){s.$$.not_equal(l[o].teams[y],r)&&(l[o].teams[y]=r,Oe.set(l))}return s.$$.update=()=>{s.$$.dirty&3&&e(2,c=l[o]),s.$$.dirty&4&&Xe(xe,a=c?.name,a)},[o,l,c,n]}class yt extends Pe{constructor(t){super(),Ie(this,t,dt,ft,Ee,{})}}export{yt as component};
