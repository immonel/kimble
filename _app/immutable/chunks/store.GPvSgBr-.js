import{w as v}from"./index.Di5oCLnN.js";var g={local:{},session:{}};function z(e){return e==="local"?localStorage:sessionStorage}function E(e,i,o){var f,p;const u=(f=o?.serializer)!=null?f:JSON,s=(p=o?.storage)!=null?p:"local",w=typeof window<"u"&&typeof document<"u",a=w?z(s):null;function m(r,d){a?.setItem(r,u.stringify(d))}if(!g[s][e]){const r=v(i,t=>{const l=a?.getItem(e);if(l&&t(u.parse(l)),w&&s=="local"){const n=c=>{c.key===e&&t(c.newValue?u.parse(c.newValue):null)};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}}),{subscribe:d,set:b}=r;g[s][e]={set(t){m(e,t),b(t)},update(t){return r.update(l=>{const n=t(l);return m(e,n),n})},subscribe:d}}return g[s][e]}const S=E("games",{}),I=e=>{S.update(i=>({...i,[e.id]:e}))},L=()=>S.set({}),T=v("");export{I as a,L as d,S as g,T as p};
